---
# Wait until pod starts
- pause:
    seconds: 60

- name: Search for all running pods
  k8s_info:
    namespace: "{{ dci_openshift_app_ns }}"
    kind: Pod
    name: "{{ item.stdout }}"
    field_selectors:
      - status.phase=Running
  loop: "{{ test_pod_names }}"
  register: test_service

- name: Fail if any pod is NOT found
  fail:
    msg: "test is not running"
  when: item == False
  loop: "{{ test_service.results }}"
