---
- name: Checking found CatalogSource with opcap
  include_role:
    name: redhatci.ocp.opcap_tool
  vars:
    opcap_target_catalog_source: "{{ tnf_operator_to_install.operator_name }}-catalog"
    opcap_catalog_source_namespace: "openshift-marketplace"
    opcap_output_dir: "{{ job_logs.path }}"
    opcap_packages: "{{ tnf_operator_to_install.operator_name }}"
  when:
    - tnf_install_operator | default(true) | bool
    - tnf_run_opcap_tests | default(true) | bool

- name: Get job info
  dci_job:
    id: "{{ job_id }}"
    status: "present"
  register: job_info
  delegate_to: localhost

- name: test_ if the OCP component is present
  assert:
    success_msg: "{{ ocp_component_id }} is present"
    fail_msg: "{{ ocp_component_id }} is absent"
    that:
      - ocp_component_id in [cmp['id'] for cmp in job_info['job']['components']]

...
