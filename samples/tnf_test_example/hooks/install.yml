---

- name: Create namespaces if not done before
  include_tasks: create_namespaces.yml
  vars:
    app_ns: "{{ item.namespace|default(dci_openshift_app_ns) }}"
  loop: "{{ tnf_config|default([]) }}"

- name: Create test pods on each namespace if not done before
  include_tasks: create_test_pods.yml
  vars:
    app_ns: "{{ item.namespace|default(dci_openshift_app_ns) }}"
    targetpodlabels: "{{ item.targetpodlabels|default([]) }}"
    exclude_connectivity_regexp: "{{ item.exclude_connectivity_regexp|default('') }}"
  loop: "{{ tnf_config|default([]) }}"
