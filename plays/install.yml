---
- name: Create namespace
  community.kubernetes.k8s:
    state: present
    definition:
      apiVersion: v1
      kind: Namespace
      metadata:
        name: "{{ dci_openshift_app_ns }}"
        labels:
          security.openshift.io/scc.podSecurityLabelSync: "false"
          pod-security.kubernetes.io/enforce: baseline
          pod-security.kubernetes.io/enforce-version: latest
  register: app_ns
  retries: 10
  delay: 5
  until:
    - app_ns.result is defined
    - app_ns.result.metadata.annotations is defined
    - app_ns.result.metadata.annotations["openshift.io/sa.scc.uid-range"] is defined

...
